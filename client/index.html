<!DOCTYPE HTML>
<html>
<head>
  <script>

  function getXMLHTTPRequest()
  {
      var request;

      // Lets try using ActiveX to instantiate the XMLHttpRequest object
      try{
          request = new ActiveXObject("Microsoft.XMLHTTP");
      }catch(ex1){
          try{
              request = new ActiveXObject("Msxml2.XMLHTTP");
          }catch(ex2){
              request = null;
          }
      }

      // If the previous didn't work, lets check if the browser natively support XMLHttpRequest
      if(!request && typeof XMLHttpRequest != "undefined"){
          //The browser does, so lets instantiate the object
          request = new XMLHttpRequest();
      }

      return request;
  }


   function loadURL(url, callback)
   {
       var aXMLHttpRequest = getXMLHTTPRequest();
       var allData;

       if (aXMLHttpRequest){
           aXMLHttpRequest.open("GET", url, true);
           aXMLHttpRequest.onreadystatechange = function (aEvt) {
           if(aXMLHttpRequest.readyState == 4){
            allData = aXMLHttpRequest.responseText;
           callback(allData)
         }

        };

        //Lets fire off the request
           aXMLHttpRequest.send(null);
       }

       else
       {
           //Oh no, the XMLHttpRequest object couldn't be instantiated.
           alert("A problem occurred instantiating the XMLHttpRequest object.");
       }
   }



    function getPhotos()
    {
      var url = "./listphotos";
      url = url + "&collection=data";
      
      var callback = function(data){
 		   var list = JSON.parse(data);
 		   allPhotos = list;
 		   var output = "";
 		   for(var i=0; i < list.length; i++){
 			   output = output + "<div id=title><h1>" + list[i].name + "</h1></div>";
 				 output = output +"<div class='image'>"+"<a class = 'thumbnail' href=" + list[i].url + " data-lightbox ='user' target = '_blank'>" + "<img id='test' class='img-rounded' src='" + list[i].url +
 			  	"'>" + "</a>"+"</div>";
         }
         document.getElementById("photoList").innerHTML = output;
       }
       loadURL(url,callback);
    }


  </script>
</head>
<body onload='getPhotos()'>
  <div>
    <a href= "login.html">Log In </a>
  </div>
  <div id="photoList">

  </div>
</body>
</html>
